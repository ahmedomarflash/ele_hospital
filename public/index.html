<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Healthy Parental</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Cairo', sans-serif;
    }
    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #232526 0%, #414345 100%);
      background-attachment: fixed;
      color: #e0f7f7;
      overflow-x: hidden;
      overflow-y: auto;
      position: relative;
      padding-top: 70px;
    }
    /* Bubbles animation */
    #bubbles-bg {
      position: fixed;
      inset: 0;
      z-index: 0;
      overflow: hidden;
      pointer-events: none;
    }
    .bubble {
      position: absolute;
      border-radius: 50%;
      opacity: 0.16;
      background: radial-gradient(circle at 60% 40%, #00fff7 0%, #00bcd4 80%, transparent 100%);
      animation: floatBubble 18s linear infinite;
      pointer-events: none;
      filter: blur(1.5px);
      mix-blend-mode: lighten;
    }
    .bubble2 {
      background: radial-gradient(circle at 40% 60%, #fff 0%, #00fff7 60%, transparent 100%);
      opacity: 0.10;
      filter: blur(3px);
      mix-blend-mode: lighten;
    }
    @keyframes floatBubble {
      0% {
        transform: translateY(100vh) scale(1);
        opacity: 0.16;
      }
      80% {
        opacity: 0.22;
      }
      100% {
        transform: translateY(-120vh) scale(1.2);
        opacity: 0;
      }
    }
    #glow-overlay {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
    }
    /* Centered box for all content */
    #mainBox {
      position: relative;
      z-index: 2;
      max-width: 1050px;
      margin: 90px auto 40px auto;
      background: rgba(30, 40, 45, 0.97);
      border-radius: 28px;
      box-shadow: 0 0 40px #00fff7bb, 0 8px 32px #002f2f44;
      padding: 40px 32px 32px 32px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 0;
    }
    #authCenter {
      position: static;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      background: none;
      width: 100%;
      margin-bottom: 30px;
    }
    #authForm {
      background: rgba(0, 47, 47, 0.97);
      box-shadow: 0 0 32px #00fff7bb, 0 8px 32px #002f2f44;
      border-radius: 22px;
      padding: 38px 32px 28px 32px;
      max-width: 370px;
      width: 100%;
      text-align: right;
      z-index: 11;
      position: relative;
      font-family: 'Cairo', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      justify-content: center;
      margin-left: 0;
      margin-right: 0;
      min-height: 0;
    }
    #authForm h2 {
      text-align: center;
      font-family: 'Cairo', sans-serif;
      font-weight: 700;
      color: #00fff7;
      margin-bottom: 18px;
      font-size: 2rem;
    }
    label {
      display: block;
      margin-bottom: 10px;
      font-weight: 600;
      font-size: 18px;
      font-family: 'Cairo', sans-serif;
    }
    input[type="email"],
    input[type="password"] {
      width: 100%;
      box-sizing: border-box;
      padding: 12px 15px;
      border-radius: 12px;
      border: none;
      font-size: 17px;
      margin-bottom: 22px;
      background-color: #002f2f;
      color: #aaf0f0;
      box-shadow: inset 0 0 10px #00fff7cc;
      font-family: 'Cairo', sans-serif;
      margin-right: 0;
      margin-left: 0;
      transition: background 0.2s, color 0.2s;
    }
    input[type="email"]:focus,
    input[type="password"]:focus {
      outline: none;
      box-shadow: 0 0 20px #00fff7ff;
      background-color: #004c4c;
      color: #e0f7f7;
    }
    button {
      width: 100%;
      background: linear-gradient(135deg, #00bcd4, #00fff7);
      border: none;
      padding: 14px 0;
      font-size: 20px;
      font-weight: 700;
      border-radius: 14px;
      cursor: pointer;
      color: #002f2f;
      margin-bottom: 10px;
      box-shadow: 0 0 15px #00fff7cc;
      font-family: 'Cairo', sans-serif;
      transition: background 0.2s;
    }
    button:hover {
      background: linear-gradient(135deg, #00fff7, #00bcd4);
      box-shadow: 0 0 30px #00fff7ff, 0 0 50px #00bcd4ff;
    }
    #googleSignInBtn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      background: #fff;
      color: #222;
      border: 1px solid #00fff7;
      margin-bottom: 16px;
      font-weight: 700;
      font-size: 16px;
      box-shadow: 0 0 8px #00fff7cc;
      transition: background 0.2s;
      font-family: 'Cairo', sans-serif;
    }
    #googleSignInBtn:hover {
      background: #e0f7f7;
    }
    #googleSignInBtn img {
      width: 22px;
      height: 22px;
      vertical-align: middle;
    }
    #message {
      margin-top:10px;
      color:#ff8080;
      font-size:14px;
      min-height: 18px;
      text-align: center;
      font-family: 'Cairo', sans-serif;
    }
    .or-divider {
      margin: 16px 0 8px 0;
      text-align: center;
      color: #aaa;
      font-family: 'Cairo', sans-serif;
    }
    #topBar {
      width: 100vw;
      background: #002f2f;
      box-shadow: 0 2px 16px #00fff7aa;
      position: fixed;
      top: 0; left: 0;
      z-index: 100;
      padding: 0;
      height: 70px;
      display: none;
    }
    #topBar .bar-content {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 18px;
      max-width: 1100px;
      margin: 0 auto;
      padding: 10px 24px;
      height: 100%;
    }
    #userAvatar {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: #e0f7f7;
      object-fit: cover;
      border: 2px solid #00fff7;
    }
    #userEmail {
      color: #aaf0f0;
      font-size: 1.1rem;
      font-weight: 700;
      direction: ltr;
      margin-left: 10px;
      font-family: 'Cairo', sans-serif;
    }
    #topBar button {
      background: linear-gradient(135deg, #00bcd4, #00fff7);
      border: none;
      padding: 7px 18px;
      font-size: 1rem;
      font-weight: 700;
      border-radius: 10px;
      cursor: pointer;
      color: #002f2f;
      margin-left: 8px;
      box-shadow: 0 0 8px #00fff7cc;
      transition: background 0.2s;
      font-family: 'Cairo', sans-serif;
    }
    #topBar button:hover {
      background: linear-gradient(135deg, #00fff7, #00bcd4);
    }
    header, main {
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease;
      z-index: 1;
      position: relative;
      display: block;
    }
    header.visible, main.visible {
      opacity: 1;
      pointer-events: auto;
    }
    header h1 {
      font-size: 3.8rem;
      margin-bottom: 40px;
      color: #00fff7;
      text-shadow: 0 0 10px #00fff7, 0 0 20px #00fff7, 0 0 40px #00fff7, 0 0 80px #00fff7;
      letter-spacing: 3px;
      text-align: center;
      font-family: 'Cairo', sans-serif;
    }
    .content-with-images {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 40px;
      max-width: 1000px;
      margin: 40px auto;
    }
    .side-column {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .side-column img {
      width: 260px;
      height: 160px;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 0 15px #00fff7aa, 0 0 30px #00fff7cc;
      transition: transform 0.4s ease, box-shadow 0.4s ease;
      cursor: pointer;
    }
    .side-column img:hover {
      transform: scale(1.05);
      box-shadow: 0 0 25px #00fff7dd, 0 0 50px #00fff7ee;
    }
    .center-text {
      max-width: 380px;
      font-size: 1.2rem;
      line-height: 1.7;
      font-weight: 600;
      text-align: center;
      color: #aaf0f0;
      padding: 15px;
      border: 2px solid #00fff7aa;
      border-radius: 14px;
      background: rgba(0, 255, 247, 0.1);
      font-family: 'Cairo', sans-serif;
    }
    /* Modal styles */
    #changePassModal {
      display: none;
      position: fixed;
      z-index: 200;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.4);
      align-items: center;
      justify-content: center;
    }
    #changePassModal .modal-content {
      background: #002f2f;
      color: #e0f7f7;
      padding: 30px 24px 20px 24px;
      border-radius: 16px;
      box-shadow: 0 0 30px #00fff7cc;
      min-width: 320px;
      max-width: 90vw;
      text-align: center;
      position: relative;
      font-family: 'Cairo', sans-serif;
    }
    #changePassModal input[type="password"] {
      margin-bottom: 18px;
      background: #18344a;
      color: #e0f7f7;
      border-radius: 8px;
      border: none;
      padding: 10px;
      width: 90%;
      font-size: 1rem;
      font-family: 'Cairo', sans-serif;
    }
    #closeModalBtn {
      position: absolute;
      left: 12px;
      top: 12px;
      background: none;
      border: none;
      color: #00fff7;
      font-size: 1.5rem;
      cursor: pointer;
    }
    #changePassModal button {
      width: auto;
      min-width: 120px;
      margin: 0 8px;
      font-family: 'Cairo', sans-serif;
    }
    /* Medicine Market Styles */
    #market-section {
      margin: 50px auto 0 auto;
      max-width: 1000px;
      width: 100%;
    }
    #marketGrid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 32px;
      margin-top: 20px;
    }
    .medicine-card {
      background: #002f2f;
      border-radius: 16px;
      box-shadow: 0 0 16px #00fff799;
      padding: 18px 12px 16px 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .medicine-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 25px #00fff7dd;
    }
    .medicine-card img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 12px;
      box-shadow: 0 0 10px #00fff7cc;
      background: #fff;
    }
    .medicine-name {
      margin: 14px 0 8px 0;
      font-size: 1.15rem;
      color: #00fff7;
      font-weight: 700;
      text-align: center;
    }
    .medicine-price {
      font-size: 1.1rem;
      color: #aaf0f0;
      margin-bottom: 10px;
    }
    .add-to-cart-btn {
      width: 90%;
      font-size: 1.1rem;
      background: linear-gradient(135deg, #00bcd4, #00fff7);
      border: none;
      padding: 8px 0;
      border-radius: 8px;
      color: #002f2f;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    .add-to-cart-btn:hover {
      box-shadow: 0 0 15px #00fff7;
    }
    /* Cart Icon */
    .cart-icon {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: #00fff7;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 20px #00fff7;
      cursor: pointer;
      z-index: 100;
      font-size: 1.5rem;
    }
    .cart-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #ff4081;
      color: white;
      width: 25px;
      height: 25px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.9rem;
    }
    
    /* Patient Page Styles */
    #patientPage {
      display: none;
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
    }
    #patientForm {
      width: 100%;
    }
    .form-section {
      margin-bottom: 30px;
    }
    .form-section h1 {
      color: #00fff7;
      text-shadow: 0 0 10px #00fff7;
      font-size: 1.8rem;
      margin-bottom: 20px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    .form-group {
      margin-bottom: 20px;
    }
    #patientForm label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #aaf0f0;
    }
    input[type="text"],
    input[type="date"],
    input[type="tel"],
    input[type="time"],
    select,
    textarea {
      width: 100%;
      padding: 12px 15px;
      border-radius: 12px;
      border: none;
      font-size: 16px;
      background-color: #002f2f;
      color: #e0f7f7;
      box-shadow: inset 0 0 10px #00fff7cc;
      font-family: 'Cairo', sans-serif;
      transition: all 0.3s;
    }
    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      box-shadow: 0 0 20px #00fff7ff;
      background-color: #004c4c;
    }
    textarea {
      min-height: 100px;
      resize: vertical;
    }
    select {
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2300fff7'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 15px center;
      background-size: 20px;
    }
    hr {
      border: none;
      height: 1px;
      background: linear-gradient(90deg, transparent, #00fff7aa, transparent);
      margin: 40px 0;
    }
    #patientForm button[type="submit"] {
      width: 100%;
      background: linear-gradient(135deg, #00bcd4, #00fff7);
      border: none;
      padding: 16px 0;
      font-size: 20px;
      font-weight: 700;
      border-radius: 14px;
      cursor: pointer;
      color: #002f2f;
      margin-top: 20px;
      box-shadow: 0 0 15px #00fff7cc;
      font-family: 'Cairo', sans-serif;
      transition: all 0.3s;
    }
    #patientForm button[type="submit"]:hover {
      background: linear-gradient(135deg, #00fff7, #00bcd4);
      box-shadow: 0 0 30px #00fff7ff;
    }

    @media (max-width: 1200px) {
      #mainBox {
        max-width: 98vw;
        padding: 20px 2vw 20px 2vw;
      }
    }
    @media (max-width: 900px) {
      #mainBox {
        flex-direction: column;
        align-items: center;
        padding: 10px 0 10px 0;
      }
      #authCenter {
        justify-content: center;
      }
      #marketGrid {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }
      #patientPage {
        max-width: 90%;
        padding: 30px 20px;
      }
    }
    @media (max-width: 600px) {
      #topBar .bar-content { padding: 10px 5px; }
      #changePassModal .modal-content { min-width: 90vw; }
      #mainBox { padding: 10px 0 10px 0; }
      #authForm { padding: 22px 6vw 18px 6vw; }
      #authForm input[type="email"],
      #authForm input[type="password"] {
        margin-right: 0;
        margin-left: 0;
      }
      #authCenter { justify-content: center; }
      #marketGrid {
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }
      #patientPage {
        padding: 25px 15px;
      }
      .form-section h1 {
        font-size: 1.5rem;
      }
    }
    @media (max-width: 480px) {
      #marketGrid {
        grid-template-columns: 1fr;
      }
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body>
<div id="bubbles-bg"></div>
<div id="glow-overlay"></div>

<!-- Top Bar (hidden by default) -->
<nav id="topBar" style="display: none;">
  <div class="bar-content">
    <img id="userAvatar" src="https://lh3.googleusercontent.com/a/ACg8ocJQ4o9DWvLAMbMNsXNNIyzbvR-CJdheL9P7VScRkW-41jK24zQF=s96-c" alt="User Avatar">
    <span id="userEmail">jopokj5@gmail.com</span>
    <button id="changePassBtn" type="button">ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</button>
    <button id="signOutBtn" type="button">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
  </div>
</nav>

<!-- Change Password Modal -->
<div id="changePassModal">
  <div class="modal-content">
    <button id="closeModalBtn" title="Ø¥ØºÙ„Ø§Ù‚">Ã—</button>
    <h3>ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h3>
    <p>Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:</p>
    <input type="password" id="newPasswordInput" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¬Ø¯ÙŠØ¯Ø©" minlength="6" required>
    <div id="changePassMsg" style="color:#ff8080;min-height:18px;margin-bottom:10px;"></div>
    <button id="saveNewPassBtn" type="button">Ø­ÙØ¸</button>
  </div>
</div>

<!-- Main Box for all content -->
<div id="mainBox">
  <div id="authCenter" style="display: flex;">
    <form id="authForm">
      <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
      <label for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
      <input type="email" id="email" placeholder="example@mail.com" required>
      <label for="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
      <input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
      <button id="signInBtn" type="button">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
      <button id="signUpBtn" type="button">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
      <div class="or-divider">Ø£Ùˆ</div>
      <button id="googleSignInBtn" type="button">
        <img src="" alt="Google">
        <span>Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Google</span>
      </button>
      <div id="message"></div>
    </form>
  </div>

  <!-- Choose Role Page (hidden by default) -->
  <div id="chooseRolePage" style="display: none; flex-direction: column; align-items: center; justify-content: center; min-height: 400px;">
    <h2 style="color:#00fff7; margin-bottom:30px; font-family:'Cairo',sans-serif;">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨</h2>
    <div style="display:flex; flex-direction:column; align-items:center; gap:40px;">
      <div style="display:flex; flex-direction:column; align-items:center;">
        <img src="https://cdn-icons-png.flaticon.com/512/6073/6073873.png" alt="Ø¯ÙƒØªÙˆØ±" style="width:120px; height:120px; border-radius:50%; box-shadow:0 0 20px #00fff7aa; margin-bottom:10px; background:#fff;">
        <button id="chooseDoctorBtn" style="width:180px; font-size:1.3rem; margin-bottom:0;">Ø¯ÙƒØªÙˆØ±</button>
      </div>
      <div style="display:flex; flex-direction:column; align-items:center;">
        <img src="https://cdn-icons-png.flaticon.com/512/2922/2922510.png" alt="Ù…Ø±ÙŠØ¶" style="width:120px; height:120px; border-radius:50%; box-shadow:0 0 20px #00fff7aa; margin-bottom:10px; background:#fff;">
        <button id="choosePatientBtn" style="width:180px; font-size:1.3rem;">Ù…Ø±ÙŠØ¶</button>
      </div>
    </div>
  </div>

  <!-- Patient Page (hidden by default) -->
  <div id="patientPage">
    <form id="patientForm">
      <!-- Personal Information -->
      <div class="form-section">
        <h1>ğŸ“ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</h1>
        
        <div class="form-group">
          <label for="full_name">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
          <input type="text" id="full_name" name="full_name" placeholder="Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ">
        </div>
        
        <div class="form-group">
          <label for="birth_date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label>
          <input type="date" id="birth_date" name="birth_date">
        </div>
        
        <div class="form-group">
          <label for="gender">Ø§Ù„Ø¬Ù†Ø³</label>
          <select id="gender" name="gender">
            <option>Ø°ÙƒØ±</option>
            <option>Ø£Ù†Ø«Ù‰</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
          <input type="tel" id="phone" name="phone" placeholder="+966 50 123 4567">
        </div>
        
        <div class="form-group">
          <label for="address">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
          <input type="text" id="address" name="address" placeholder="Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©">
        </div>
        
        <div class="form-group">
          <label for="patient_email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
          <input type="email" id="patient_email" name="patient_email" placeholder="example@gmail.com">
        </div>
      </div>
      
      <hr>
      
      <!-- Booking Information -->
      <div class="form-section">
        <h1>ğŸ“… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø¬Ø²</h1>
        
        <div class="form-group">
          <label for="appointment_date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ¹Ø¯</label>
          <input type="date" id="appointment_date" name="appointment_date">
        </div>
        
        <div class="form-group">
          <label for="preferred_time">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØ¶Ù„</label>
          <input type="time" id="preferred_time" name="preferred_time">
        </div>
        
        <div class="form-group">
          <label for="visit_type">Ù†ÙˆØ¹ Ø§Ù„Ø²ÙŠØ§Ø±Ø©</label>
          <select id="visit_type" name="visit_type">
            <option>ÙØ­Øµ Ø±ÙˆØªÙŠÙ†ÙŠ</option>
            <option>Ù…ØªØ§Ø¨Ø¹Ø©</option>
            <option>Ø­Ø§Ù„Ø© Ø·Ø§Ø±Ø¦Ø©</option>
          </select>
        </div>
      </div>
      
      <hr>
      
      <!-- Medical Information -->
      <div class="form-section">
        <h1>ğŸ©º Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h1>
        
        <div class="form-group">
          <label for="main_complaint">Ø§Ù„Ø´ÙƒÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ø³Ø¨Ø¨ Ø§Ù„Ø²ÙŠØ§Ø±Ø©)</label>
          <textarea id="main_complaint" name="main_complaint" placeholder="Ù…Ø«Ø§Ù„: Ø£Ù„Ù… ÙÙŠ Ø§Ù„ØµØ¯Ø± Ù…Ù†Ø° Ø£Ø³Ø¨ÙˆØ¹"></textarea>
        </div>
        
        <div class="form-group">
          <label for="illness_history">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„ÙŠ</label>
          <textarea id="illness_history" name="illness_history" placeholder="Ù…Ø«Ø§Ù„: Ø¨Ø¯Ø£ Ø§Ù„Ø£Ù„Ù… Ù…Ù†Ø° 3 Ø£ÙŠØ§Ù…"></textarea>
        </div>
        
        <div class="form-group">
          <label for="chronic_diseases">Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ù…Ø²Ù…Ù†Ø©</label>
          <textarea id="chronic_diseases" name="chronic_diseases" placeholder="Ù…Ø«Ø§Ù„: Ø¶ØºØ· Ø§Ù„Ø¯Ù…ØŒ Ø§Ù„Ø³ÙƒØ±ÙŠ"></textarea>
        </div>
        
        <div class="form-group">
          <label for="drug_allergy">Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ© Ù…Ù† Ø§Ù„Ø£Ø¯ÙˆÙŠØ©</label>
          <textarea id="drug_allergy" name="drug_allergy" placeholder="Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ùˆ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¯ÙˆÙŠØ©"></textarea>
        </div>
        
        <div class="form-group">
          <label for="current_medication">Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
          <textarea id="current_medication" name="current_medication" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø³Ø¨Ø±ÙŠÙ† 81 Ù…Ù„Øº"></textarea>
        </div>
      </div>
      
      <button type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</button>
    </form>
  </div>

  <header class="">
    <h1>Healthy Parental</h1>
  </header>
  <main class="">
    <section class="content-with-images">
      <div class="side-column">
        <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=500&q=90">
        <img src="https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=500&q=90">
      </div>
      <div class="center-text">
        Good health is essential for a happy life. Maintaining a balanced diet, regular exercise, and sufficient rest can improve your well-being and energy.
      </div>
      <div class="side-column">
        <img src="https://images.unsplash.com/photo-1498837167922-ddd27525d352?auto=format&fit=crop&w=500&q=90">
        <img src="https://images.unsplash.com/photo-1515377905703-c4788e51af15?auto=format&fit=crop&w=500&q=90">
      </div>
    </section>

    <!-- Medicine Market Section -->
    <section id="market-section" style="margin: 50px auto 0 auto; max-width: 1000px;">
      <h2 style="color:#00fff7; text-align:center; margin-bottom:30px; font-family:'Cairo',sans-serif;">Ø³ÙˆÙ‚ Ø§Ù„Ø£Ø¯ÙˆÙŠØ©</h2>
      <div style="text-align:center; margin-bottom:20px;">
        <label for="currencySelect" style="font-size:1.1rem; color:#aaf0f0;">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø©:</label>
        <select id="currencySelect" style="font-size:1.1rem; border-radius:8px; padding:4px 12px; margin-right:8px; background:#002f2f; color:#e0f7f7; border:1px solid #00fff7;">
          <option value="egp">Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±ÙŠ (EGP)</option>
          <option value="usd">Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</option>
        </select>
      </div>
      <div id="marketGrid">
        <div class="medicine-card">
          <img src="https://masterapi.witheldokan.com/storage/seif-pharmacies/uploads/171137.webp" alt="Ø¨Ø§Ù†Ø§Ø¯ÙˆÙ„ Ø¥ÙƒØ³ØªØ±Ø§">
          <div class="medicine-name">Ø¨Ø§Ù†Ø§Ø¯ÙˆÙ„ Ø¥ÙƒØ³ØªØ±Ø§</div>
          <div class="medicine-price">30 Ø¬Ù†ÙŠÙ‡</div>
          <button class="add-to-cart-btn">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
        </div>
        <div class="medicine-card">
          <img src="" alt="ÙƒÙˆÙ†Ø¬Ø³ØªØ§Ù„">
          <div class="medicine-name">ÙƒÙˆÙ†Ø¬Ø³ØªØ§Ù„</div>
          <div class="medicine-price">27 Ø¬Ù†ÙŠÙ‡</div>
          <button class="add-to-cart-btn">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
        </div>
        <div class="medicine-card">
          <img src="" alt="ÙÙ„ÙˆØ±Ø³Øª">
          <div class="medicine-name">ÙÙ„ÙˆØ±Ø³Øª</div>
          <div class="medicine-price">18 Ø¬Ù†ÙŠÙ‡</div>
          <button class="add-to-cart-btn">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
        </div>
        <div class="medicine-card">
          <img src="" alt="Ø£ÙˆØ¬Ù…Ù†ØªÙŠÙ† 1 Ø¬Ù…">
          <div class="medicine-name">Ø£ÙˆØ¬Ù…Ù†ØªÙŠÙ† 1 Ø¬Ù…</div>
          <div class="medicine-price">120 Ø¬Ù†ÙŠÙ‡</div>
          <button class="add-to-cart-btn">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
        </div>
        <div class="medicine-card">
          <img src="" alt="ÙƒØªØ§ÙÙ„Ø§Ù… 50 Ù…Ø¬Ù…">
          <div class="medicine-name">ÙƒØªØ§ÙÙ„Ø§Ù… 50 Ù…Ø¬Ù…</div>
          <div class="medicine-price">45 Ø¬Ù†ÙŠÙ‡</div>
          <button class="add-to-cart-btn">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
        </div>
        <div class="medicine-card">
          <img src="" alt="Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„">
          <div class="medicine-name">Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„</div>
          <div class="medicine-price">12 Ø¬Ù†ÙŠÙ‡</div>
          <button class="add-to-cart-btn">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button> 
        </div>
        <div class="medicine-card">
          <img src="" alt="Ø£Ù…ÙˆÙƒØ³ÙŠÙ„ 500 Ù…Ø¬Ù…">
          <div class="medicine-name">Ø£Ù…ÙˆÙƒØ³ÙŠÙ„ 500 Ù…Ø¬Ù…</div>
          <div class="medicine-price">35 Ø¬Ù†ÙŠÙ‡</div>
          <button class="add-to-cart-btn">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
        </div>
        <div class="medicine-card">
          <img src="" alt="Ø³Ø¨ØªØ±ÙŠÙ† DS">
          <div class="medicine-name">Ø³Ø¨ØªØ±ÙŠÙ† DS</div>
          <div class="medicine-price">20 Ø¬Ù†ÙŠÙ‡</div>
          <button class="add-to-cart-btn">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
        </div>
      </div>
    </section>
  </main>
</div>

<!-- Cart Icon -->
<div class="cart-icon">
  ğŸ›’
  <span class="cart-count">0</span>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, sendPasswordResetEmail, signOut, GoogleAuthProvider, signInWithPopup, updatePassword } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";
  import { getFirestore, collection, addDoc, doc, setDoc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD3v9Qv1nVvQhT3c3O0C0B2F8B2F8B2F8B2F",
    authDomain: "healthy-parental.firebaseapp.com",
    projectId: "healthy-parental",
    storageBucket: "healthy-parental.appspot.com",
    messagingSenderId: "123456789",
    appId: "1:123456789:web:1234567890abcdef"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const googleProvider = new GoogleAuthProvider();

  // DOM Elements
  const authForm = document.getElementById('authForm');
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const signInBtn = document.getElementById('signInBtn');
  const signUpBtn = document.getElementById('signUpBtn');
  const googleSignInBtn = document.getElementById('googleSignInBtn');
  const messageDiv = document.getElementById('message');
  const topBar = document.getElementById('topBar');
  const userEmail = document.getElementById('userEmail');
  const userAvatar = document.getElementById('userAvatar');
  const signOutBtn = document.getElementById('signOutBtn');
  const changePassBtn = document.getElementById('changePassBtn');
  const changePassModal = document.getElementById('changePassModal');
  const closeModalBtn = document.getElementById('closeModalBtn');
  const newPasswordInput = document.getElementById('newPasswordInput');
  const saveNewPassBtn = document.getElementById('saveNewPassBtn');
  const changePassMsg = document.getElementById('changePassMsg');
  const header = document.querySelector('header');
  const main = document.querySelector('main');
  const chooseRolePage = document.getElementById('chooseRolePage');
  const chooseDoctorBtn = document.getElementById('chooseDoctorBtn');
  const choosePatientBtn = document.getElementById('choosePatientBtn');
  const patientPage = document.getElementById('patientPage');
  const patientForm = document.getElementById('patientForm');

  // Bubbles animation
  function createBubbles() {
    const bubblesContainer = document.getElementById('bubbles-bg');
    const bubbleCount = 20;
    
    for (let i = 0; i < bubbleCount; i++) {
      const bubble = document.createElement('div');
      bubble.classList.add('bubble');
      if (i % 3 === 0) bubble.classList.add('bubble2');
      
      const size = Math.random() * 150 + 30;
      bubble.style.width = `${size}px`;
      bubble.style.height = `${size}px`;
      
      const posX = Math.random() * 100;
      bubble.style.left = `${posX}%`;
      
      const delay = Math.random() * 15;
      bubble.style.animationDelay = `${delay}s`;
      
      bubblesContainer.appendChild(bubble);
    }
  }
  
  createBubbles();

  // Authentication Functions
  async function handleSignIn() {
    const email = emailInput.value;
    const password = passwordInput.value;
    
    try {
      const userCredential = await signInWithEmailAndPassword(auth, email, password);
      const user = userCredential.user;
      showMessage(`Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒØŒ ${user.email}`, 'success');
      
      // Check if user has role selected
      const userDoc = await getDoc(doc(db, 'users', user.uid));
      if (userDoc.exists() && userDoc.data().role) {
        showMainContent(user);
      } else {
        showRoleSelection();
      }
    } catch (error) {
      showMessage(getErrorMessage(error.code), 'error');
    }
  }

  async function handleSignUp() {
    const email = emailInput.value;
    const password = passwordInput.value;
    
    try {
      const userCredential = await createUserWithEmailAndPassword(auth, email, password);
      const user = userCredential.user;
      showMessage(`ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­ØŒ ${user.email}`, 'success');
      
      // Create user document in Firestore
      await setDoc(doc(db, 'users', user.uid), {
        email: user.email,
        createdAt: new Date()
      });
      
      showRoleSelection();
    } catch (error) {
      showMessage(getErrorMessage(error.code), 'error');
    }
  }

  async function handleGoogleSignIn() {
    try {
      const result = await signInWithPopup(auth, googleProvider);
      const user = result.user;
      showMessage(`ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­ØŒ ${user.email}`, 'success');
      
      // Check if user exists in Firestore
      const userDoc = await getDoc(doc(db, 'users', user.uid));
      if (userDoc.exists() && userDoc.data().role) {
        showMainContent(user);
      } else {
        // Create user document if it doesn't exist
        if (!userDoc.exists()) {
          await setDoc(doc(db, 'users', user.uid), {
            email: user.email,
            createdAt: new Date()
          });
        }
        showRoleSelection();
      }
    } catch (error) {
      showMessage(getErrorMessage(error.code), 'error');
    }
  }

  function showRoleSelection() {
    authForm.style.display = 'none';
    chooseRolePage.style.display = 'flex';
  }

  async function handleRoleSelection(role) {
    const user = auth.currentUser;
    if (user) {
      try {
        await updateDoc(doc(db, 'users', user.uid), {
          role: role,
          roleSelectedAt: new Date()
        });
        
        if (role === 'patient') {
          showPatientPage();
        } else {
          showMainContent(user);
        }
      } catch (error) {
        showMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¯ÙˆØ±', 'error');
      }
    }
  }

  function showPatientPage() {
    chooseRolePage.style.display = 'none';
    patientPage.style.display = 'block';
    topBar.style.display = 'flex';
  }

  async function handlePatientFormSubmit(e) {
    e.preventDefault();
    
    const user = auth.currentUser;
    if (!user) return;
    
    try {
      // Collect form data
      const formData = {
        full_name: document.getElementById('full_name').value,
        birth_date: document.getElementById('birth_date').value,
        gender: document.getElementById('gender').value,
        phone: document.getElementById('phone').value,
        address: document.getElementById('address').value,
        patient_email: document.getElementById('patient_email').value,
        appointment_date: document.getElementById('appointment_date').value,
        preferred_time: document.getElementById('preferred_time').value,
        visit_type: document.getElementById('visit_type').value,
        main_complaint: document.getElementById('main_complaint').value,
        illness_history: document.getElementById('illness_history').value,
        chronic_diseases: document.getElementById('chronic_diseases').value,
        drug_allergy: document.getElementById('drug_allergy').value,
        current_medication: document.getElementById('current_medication').value,
        submittedAt: new Date()
      };
      
      // Save to Firestore
      await addDoc(collection(db, 'patients'), {
        userId: user.uid,
        ...formData
      });
      
      showMessage('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.', 'success');
      
      // Show main content after successful submission
      showMainContent(user);
    } catch (error) {
      showMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
    }
  }

  function showMainContent(user) {
    authForm.style.display = 'none';
    chooseRolePage.style.display = 'none';
    patientPage.style.display = 'none';
    topBar.style.display = 'flex';
    header.classList.add('visible');
    main.classList.add('visible');
    
    userEmail.textContent = user.email;
    if (user.photoURL) {
      userAvatar.src = user.photoURL;
    }
  }

  async function handleSignOut() {
    try {
      await signOut(auth);
      resetUI();
      showMessage('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
    } catch (error) {
      showMessage('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬', 'error');
    }
  }

  async function handleChangePassword() {
    const newPassword = newPasswordInput.value;
    const user = auth.currentUser;
    
    if (newPassword.length < 6) {
      changePassMsg.textContent = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„';
      return;
    }
    
    try {
      await updatePassword(user, newPassword);
      changePassMsg.textContent = 'ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­';
      changePassMsg.style.color = '#80ff80';
      setTimeout(() => {
        changePassModal.style.display = 'none';
        changePassMsg.textContent = '';
        newPasswordInput.value = '';
      }, 1500);
    } catch (error) {
      changePassMsg.textContent = getErrorMessage(error.code);
    }
  }

  function resetUI() {
    authForm.style.display = 'flex';
    chooseRolePage.style.display = 'none';
    patientPage.style.display = 'none';
    topBar.style.display = 'none';
    header.classList.remove('visible');
    main.classList.remove('visible');
    emailInput.value = '';
    passwordInput.value = '';
  }

  function showMessage(message, type) {
    messageDiv.textContent = message;
    messageDiv.style.color = type === 'error' ? '#ff8080' : '#80ff80';
    setTimeout(() => {
      messageDiv.textContent = '';
    }, 5000);
  }

  function getErrorMessage(errorCode) {
    const errorMessages = {
      'auth/invalid-email': 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­',
      'auth/user-disabled': 'Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø·Ù„',
      'auth/user-not-found': 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø¨ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯',
      'auth/wrong-password': 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©',
      'auth/email-already-in-use': 'Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„',
      'auth/weak-password': 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ© Ø¬Ø¯Ø§Ù‹',
      'auth/requires-recent-login': 'ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±'
    };
    
    return errorMessages[errorCode] || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹';
  }

  // Event Listeners
  signInBtn.addEventListener('click', handleSignIn);
  signUpBtn.addEventListener('click', handleSignUp);
  googleSignInBtn.addEventListener('click', handleGoogleSignIn);
  signOutBtn.addEventListener('click', handleSignOut);
  changePassBtn.addEventListener('click', () => {
    changePassModal.style.display = 'flex';
  });
  closeModalBtn.addEventListener('click', () => {
    changePassModal.style.display = 'none';
    changePassMsg.textContent = '';
  });
  saveNewPassBtn.addEventListener('click', handleChangePassword);
  chooseDoctorBtn.addEventListener('click', () => handleRoleSelection('doctor'));
  choosePatientBtn.addEventListener('click', () => handleRoleSelection('patient'));
  patientForm.addEventListener('submit', handlePatientFormSubmit);

  // Check auth state
  auth.onAuthStateChanged((user) => {
    if (user) {
      getDoc(doc(db, 'users', user.uid)).then((docSnap) => {
        if (docSnap.exists() && docSnap.data().role) {
          if (docSnap.data().role === 'patient') {
            showPatientPage();
          } else {
            showMainContent(user);
          }
        } else {
          showRoleSelection();
        }
      });
    } else {
      resetUI();
    }
  });

  // Shopping cart functionality
  let cartCount = 0;
  const cartCountElement = document.querySelector('.cart-count');
  const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
  
  addToCartButtons.forEach(button => {
    button.addEventListener('click', () => {
      cartCount++;
      cartCountElement.textContent = cartCount;
      
      // Animation effect
      cartCountElement.style.transform = 'scale(1.3)';
      setTimeout(() => {
        cartCountElement.style.transform = 'scale(1)';
      }, 300);
    });
  });
</script>
</body>
</html>
