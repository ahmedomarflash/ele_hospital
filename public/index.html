<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Healthy Parental</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600&display=swap" rel="stylesheet">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Cairo', sans-serif;
    }
    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #232526 0%, #414345 100%);
      background-attachment: fixed;
      color: #e0f7f7;
      overflow-x: hidden;
      overflow-y: auto;
      position: relative;
      padding-top: 70px;
    }
    /* Bubbles animation */
    #bubbles-bg {
      position: fixed;
      inset: 0;
      z-index: 0;
      overflow: hidden;
      pointer-events: none;
    }
    .bubble {
      position: absolute;
      border-radius: 50%;
      opacity: 0.16;
      background: radial-gradient(circle at 60% 40%, #00fff7 0%, #00bcd4 80%, transparent 100%);
      animation: floatBubble 18s linear infinite;
      pointer-events: none;
      filter: blur(1.5px);
      mix-blend-mode: lighten;
    }
    .bubble2 {
      background: radial-gradient(circle at 40% 60%, #fff 0%, #00fff7 60%, transparent 100%);
      opacity: 0.10;
      filter: blur(3px);
      mix-blend-mode: lighten;
    }
    @keyframes floatBubble {
      0% {
        transform: translateY(100vh) scale(1);
        opacity: 0.16;
      }
      80% {
        opacity: 0.22;
      }
      100% {
        transform: translateY(-120vh) scale(1.2);
        opacity: 0;
      }
    }
    #glow-overlay {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
    }

    /* Top bar */
    #topBar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: rgba(30, 40, 45, 0.95);
      backdrop-filter: blur(10px);
      display: none;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0, 255, 247, 0.3);
    }
    #userInfo {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    #userAvatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid #00fff7;
    }
    #userName {
      color: #00fff7;
      font-weight: 600;
    }
    #signOutBtn {
      background: linear-gradient(135deg, #ff4444, #cc3333);
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      color: white;
      cursor: pointer;
      font-family: 'Cairo', sans-serif;
      font-weight: 600;
    }

    /* Auth container */
    #authContainer {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 80vh;
    }
    #authBox {
      background: rgba(30, 40, 45, 0.97);
      border-radius: 28px;
      box-shadow: 0 0 40px #00fff7bb, 0 8px 32px #002f2f44;
      padding: 40px;
      max-width: 400px;
      width: 90%;
      text-align: center;
    }
    #authBox h2 {
      color: #00fff7;
      text-shadow: 0 0 10px #00fff7;
      margin-bottom: 30px;
    }
    .auth-input {
      width: 100%;
      padding: 12px 15px;
      margin: 10px 0;
      border: none;
      border-radius: 12px;
      background: rgba(0, 47, 47, 0.8);
      color: #e0f7f7;
      font-family: 'Cairo', sans-serif;
      box-shadow: inset 0 0 10px rgba(0, 255, 247, 0.3);
    }
    .auth-input:focus {
      outline: none;
      box-shadow: 0 0 20px #00fff7ff;
    }
    .auth-btn {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: none;
      border-radius: 12px;
      font-family: 'Cairo', sans-serif;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    #loginBtn, #registerBtn {
      background: linear-gradient(135deg, #00bcd4, #00fff7);
      color: #002f2f;
    }
    #googleBtn {
      background: #dd4b39;
      color: white;
    }
    .auth-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 255, 247, 0.4);
    }

    /* Role selection */
    #chooseRolePage {
      position: relative;
      z-index: 2;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 400px;
    }
    #chooseRolePage h2 {
      color: #00fff7;
      margin-bottom: 30px;
      font-family: 'Cairo', sans-serif;
    }
    .role-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 20px;
    }
    .role-option img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      box-shadow: 0 0 20px #00fff7aa;
      margin-bottom: 10px;
      background: #fff;
    }
    .role-btn {
      width: 180px;
      font-size: 1.3rem;
      background: linear-gradient(135deg, #00bcd4, #00fff7);
      color: #002f2f;
      border: none;
      padding: 12px;
      border-radius: 12px;
      cursor: pointer;
      font-family: 'Cairo', sans-serif;
      font-weight: 600;
    }

    /* Main content */
    header {
      text-align: center;
      margin-bottom: 40px;
      opacity: 0;
      transition: opacity 1s ease-in-out;
      position: relative;
      z-index: 2;
    }
    header.visible {
      opacity: 1;
    }
    header h1 {
      color: #00fff7;
      text-shadow: 0 0 20px #00fff7;
      font-size: 3rem;
      margin: 0;
    }
    main {
      opacity: 0;
      transition: opacity 1s ease-in-out;
      position: relative;
      z-index: 2;
    }
    main.visible {
      opacity: 1;
    }
    .content-with-images {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 40px;
      padding: 0 20px;
    }
    .content-card {
      background: rgba(30, 40, 45, 0.97);
      border-radius: 20px;
      padding: 30px;
      max-width: 350px;
      text-align: center;
      box-shadow: 0 0 30px rgba(0, 255, 247, 0.3);
      transition: transform 0.3s;
    }
    .content-card:hover {
      transform: translateY(-10px);
    }
    .content-card img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      margin-bottom: 20px;
      box-shadow: 0 0 15px rgba(0, 255, 247, 0.5);
    }
    .content-card h3 {
      color: #00fff7;
      margin-bottom: 15px;
    }

    /* Patient Form Styles */
    #patientPage {
      position: relative;
      z-index: 2;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 80vh;
    }
    #patientFormBox {
      max-width: 800px;
      margin: 40px auto;
      background: rgba(30, 40, 45, 0.97);
      border-radius: 28px;
      box-shadow: 0 0 40px #00fff7bb, 0 8px 32px #002f2f44;
      padding: 40px;
      width: 90%;
    }
    #patientForm {
      width: 100%;
    }
    .form-section {
      margin-bottom: 30px;
    }
    .form-section h1 {
      color: #00fff7;
      text-shadow: 0 0 10px #00fff7;
      font-size: 1.8rem;
      margin-bottom: 20px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    .form-group {
      margin-bottom: 20px;
    }
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #aaf0f0;
    }
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px 15px;
      border-radius: 12px;
      border: none;
      font-size: 16px;
      background-color: #002f2f;
      color: #e0f7f7;
      box-shadow: inset 0 0 10px #00fff7cc;
      font-family: 'Cairo', sans-serif;
      transition: all 0.3s;
      box-sizing: border-box;
    }
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      box-shadow: 0 0 20px #00fff7ff;
      background-color: #004c4c;
    }
    .form-group textarea {
      min-height: 100px;
      resize: vertical;
    }
    .form-group select {
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2300fff7'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 15px center;
      background-size: 20px;
    }
    .form-section hr {
      border: none;
      height: 1px;
      background: linear-gradient(90deg, transparent, #00fff7aa, transparent);
      margin: 40px 0;
    }
    #submitPatientBtn {
      width: 100%;
      background: linear-gradient(135deg, #00bcd4, #00fff7);
      border: none;
      padding: 16px 0;
      font-size: 20px;
      font-weight: 700;
      border-radius: 14px;
      cursor: pointer;
      color: #002f2f;
      margin-top: 20px;
      box-shadow: 0 0 15px #00fff7cc;
      font-family: 'Cairo', sans-serif;
      transition: all 0.3s;
    }
    #submitPatientBtn:hover {
      background: linear-gradient(135deg, #00fff7, #00bcd4);
      box-shadow: 0 0 30px #00fff7ff;
    }
    #backToMainBtn {
      width: 100%;
      background: linear-gradient(135deg, #666, #888);
      border: none;
      padding: 12px 0;
      font-size: 16px;
      font-weight: 600;
      border-radius: 14px;
      cursor: pointer;
      color: white;
      margin-top: 10px;
      font-family: 'Cairo', sans-serif;
      transition: all 0.3s;
    }
    #backToMainBtn:hover {
      background: linear-gradient(135deg, #888, #aaa);
    }

    @media (max-width: 900px) {
      #patientFormBox {
        padding: 30px 20px;
      }
    }
    @media (max-width: 600px) {
      #patientFormBox {
        padding: 25px 15px;
      }
      .form-section h1 {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
<div id="bubbles-bg"></div>
<div id="glow-overlay"></div>

<!-- Top bar (hidden by default) -->
<div id="topBar">
  <div id="userInfo">
    <img id="userAvatar" src="" alt="User Avatar">
    <span id="userName"></span>
  </div>
  <button id="signOutBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<!-- Auth Container -->
<div id="authContainer">
  <div id="authBox">
    <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Healthy Parental</h2>
    <div id="loginForm">
      <input type="email" id="loginEmail" class="auth-input" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
      <input type="password" id="loginPassword" class="auth-input" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
      <button id="loginBtn" class="auth-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
      <button id="googleBtn" class="auth-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù€ Google</button>
      <p style="margin-top: 20px;">
        Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ 
        <span id="showRegisterForm" style="color: #00fff7; cursor: pointer; text-decoration: underline;">Ø³Ø¬Ù„ Ù‡Ù†Ø§</span>
      </p>
    </div>
    
    <div id="registerForm" style="display: none;">
      <input type="text" id="registerName" class="auth-input" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
      <input type="email" id="registerEmail" class="auth-input" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
      <input type="password" id="registerPassword" class="auth-input" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
      <button id="registerBtn" class="auth-btn">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</button>
      <p style="margin-top: 20px;">
        Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ 
        <span id="showLoginForm" style="color: #00fff7; cursor: pointer; text-decoration: underline;">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„</span>
      </p>
    </div>
  </div>
</div>

<!-- Choose Role Page -->
<div id="chooseRolePage">
  <h2>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨</h2>
  <div style="display:flex; flex-direction:column; align-items:center; gap:40px;">
    <div class="role-option">
      <img src="https://cdn-icons-png.flaticon.com/512/6073/6073873.png" alt="Ø¯ÙƒØªÙˆØ±">
      <button id="chooseDoctorBtn" class="role-btn">Ø¯ÙƒØªÙˆØ±</button>
    </div>
    <div class="role-option">
      <img src="https://cdn-icons-png.flaticon.com/512/2922/2922510.png" alt="Ù…Ø±ÙŠØ¶">
      <button id="choosePatientBtn" class="role-btn">Ù…Ø±ÙŠØ¶</button>
    </div>
  </div>
</div>

<!-- Main Content (Doctor Dashboard) -->
<header>
  <h1>Healthy Parental</h1>
</header>
<main>
  <section class="content-with-images">
    <div class="content-card">
      <img src="https://cdn-icons-png.flaticon.com/512/2785/2785482.png" alt="Medical Care">
      <h3>Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ø·Ø¨ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h3>
      <p>Ù†Ù‚Ø¯Ù… Ø£ÙØ¶Ù„ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„ØµØ­ÙŠØ© Ù„Ù„Ø£Ø·ÙØ§Ù„ ÙˆØ§Ù„Ø¹Ø§Ø¦Ù„Ø§Øª Ù…Ø¹ ÙØ±ÙŠÙ‚ Ø·Ø¨ÙŠ Ù…ØªØ®ØµØµ ÙˆÙ…Ø¤Ù‡Ù„.</p>
    </div>
    
    <div class="content-card">
      <img src="https://cdn-icons-png.flaticon.com/512/2785/2785729.png" alt="Emergency">
      <h3>Ø®Ø¯Ù…Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ 24/7</h3>
      <p>Ù…ØªÙˆÙØ±ÙˆÙ† Ø¹Ù„Ù‰ Ù…Ø¯Ø§Ø± Ø§Ù„Ø³Ø§Ø¹Ø© Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ø¹Ø§Ø¬Ù„Ø© ÙˆØ§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ© Ø§Ù„ÙÙˆØ±ÙŠØ©.</p>
    </div>
    
    <div class="content-card">
      <img src="https://cdn-icons-png.flaticon.com/512/2785/2785471.png" alt="Consultation">
      <h3>Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø·Ø¨ÙŠØ©</h3>
      <p>Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ùƒ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø·Ø¨ÙŠØ© Ø´Ø§Ù…Ù„Ø© Ù…Ø¹ Ø£Ø·Ø¨Ø§Ø¦Ù†Ø§ Ø§Ù„Ù…ØªØ®ØµØµÙŠÙ†.</p>
    </div>
  </section>
</main>

<!-- Patient Form Page -->
<div id="patientPage">
  <div id="patientFormBox">
    <form id="patientForm">
      <!-- Personal Information -->
      <div class="form-section">
        <h1>ğŸ“ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</h1>
        
        <div class="form-group">
          <label for="full_name">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
          <input type="text" id="full_name" name="full_name" placeholder="Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ">
        </div>
        
        <div class="form-group">
          <label for="birth_date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label>
          <input type="date" id="birth_date" name="birth_date">
        </div>
        
        <div class="form-group">
          <label for="gender">Ø§Ù„Ø¬Ù†Ø³</label>
          <select id="gender" name="gender">
            <option>Ø°ÙƒØ±</option>
            <option>Ø£Ù†Ø«Ù‰</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
          <input type="tel" id="phone" name="phone" placeholder="+966 50 123 4567">
        </div>
        
        <div class="form-group">
          <label for="address">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
          <input type="text" id="address" name="address" placeholder="Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©">
        </div>
        
        <div class="form-group">
          <label for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
          <input type="email" id="email" name="email" placeholder="example@gmail.com">
        </div>
      </div>
      
      <hr>
      
      <!-- Booking Information -->
      <div class="form-section">
        <h1>ğŸ“… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø¬Ø²</h1>
        
        <div class="form-group">
          <label for="appointment_date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ¹Ø¯</label>
          <input type="date" id="appointment_date" name="appointment_date">
        </div>
        
        <div class="form-group">
          <label for="preferred_time">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØ¶Ù„</label>
          <input type="time" id="preferred_time" name="preferred_time">
        </div>
        
        <div class="form-group">
          <label for="visit_type">Ù†ÙˆØ¹ Ø§Ù„Ø²ÙŠØ§Ø±Ø©</label>
          <select id="visit_type" name="visit_type">
            <option>ÙØ­Øµ Ø±ÙˆØªÙŠÙ†ÙŠ</option>
            <option>Ù…ØªØ§Ø¨Ø¹Ø©</option>
            <option>Ø­Ø§Ù„Ø© Ø·Ø§Ø±Ø¦Ø©</option>
          </select>
        </div>
      </div>
      
      <hr>
      
      <!-- Medical Information -->
      <div class="form-section">
        <h1>ğŸ©º Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h1>
        
        <div class="form-group">
          <label for="main_complaint">Ø§Ù„Ø´ÙƒÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ø³Ø¨Ø¨ Ø§Ù„Ø²ÙŠØ§Ø±Ø©)</label>
          <textarea id="main_complaint" name="main_complaint" placeholder="Ù…Ø«Ø§Ù„: Ø£Ù„Ù… ÙÙŠ Ø§Ù„ØµØ¯Ø± Ù…Ù†Ø° Ø£Ø³Ø¨ÙˆØ¹"></textarea>
        </div>
        
        <div class="form-group">
          <label for="illness_history">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„ÙŠ</label>
          <textarea id="illness_history" name="illness_history" placeholder="Ù…Ø«Ø§Ù„: Ø¨Ø¯Ø£ Ø§Ù„Ø£Ù„Ù… Ù…Ù†Ø° 3 Ø£ÙŠØ§Ù…"></textarea>
        </div>
        
        <div class="form-group">
          <label for="chronic_diseases">Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ù…Ø²Ù…Ù†Ø©</label>
          <textarea id="chronic_diseases" name="chronic_diseases" placeholder="Ù…Ø«Ø§Ù„: Ø¶ØºØ· Ø§Ù„Ø¯Ù…ØŒ Ø§Ù„Ø³ÙƒØ±ÙŠ"></textarea>
        </div>
        
        <div class="form-group">
          <label for="drug_allergy">Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ© Ù…Ù† Ø§Ù„Ø£Ø¯ÙˆÙŠØ©</label>
          <textarea id="drug_allergy" name="drug_allergy" placeholder="Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ùˆ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¯ÙˆÙŠØ©"></textarea>
        </div>
        
        <div class="form-group">
          <label for="current_medication">Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
          <textarea id="current_medication" name="current_medication" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø³Ø¨Ø±ÙŠÙ† 81 Ù…Ù„Øº"></textarea>
        </div>
      </div>
      
      <button type="submit" id="submitPatientBtn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</button>
      <button type="button" id="backToMainBtn">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    </form>
  </div>
</div>

<script type="module">
  // Import Firebase modules
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js';
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js';

  // Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyDGpAHia_wEmrhnmYjrPf1n1TrAzwEMiAI",
    authDomain: "messageemeapp.firebaseapp.com",
    databaseURL: "https://messageemeapp-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "messageemeapp",
    storageBucket: "messageemeapp.appspot.com",
    messagingSenderId: "278680662267",
    appId: "1:278680662267:web:cb9d37dd6ce5bf6cd222b8"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider();

  // DOM elements
  const authContainer = document.getElementById('authContainer');
  const chooseRolePage = document.getElementById('chooseRolePage');
  const patientPage = document.getElementById('patientPage');
  const topBar = document.getElementById('topBar');
  const header = document.querySelector('header');
  const main = document.querySelector('main');
  const loginForm = document.getElementById('loginForm');
  const registerForm = document.getElementById('registerForm');
  
  const loginBtn = document.getElementById('loginBtn');
  const registerBtn = document.getElementById('registerBtn');
  const googleBtn = document.getElementById('googleBtn');
  const signOutBtn = document.getElementById('signOutBtn');
  const showRegisterForm = document.getElementById('showRegisterForm');
  const showLoginForm = document.getElementById('showLoginForm');
  const chooseDoctorBtn = document.getElementById('chooseDoctorBtn');
  const choosePatientBtn = document.getElementById('choosePatientBtn');
  const backToMainBtn = document.getElementById('backToMainBtn');
  
  const userAvatar = document.getElementById('userAvatar');
  const userName = document.getElementById('userName');

  // Bubbles animation
  const bubblesBg = document.getElementById('bubbles-bg');
  function randomBetween(a, b) {
    return Math.random() * (b - a) + a;
  }
  function createBubble() {
    const bubble = document.createElement('div');
    bubble.className = Math.random() > 0.5 ? 'bubble' : 'bubble bubble2';
    const size = randomBetween(40, 120);
    bubble.style.width = `${size}px`;
    bubble.style.height = `${size}px`;
    bubble.style.left = `${randomBetween(2, 98)}vw`;
    bubble.style.animationDuration = `${randomBetween(14, 28)}s`;
    bubble.style.animationDelay = `${randomBetween(0, 14)}s`;
    bubblesBg.appendChild(bubble);
    bubble.addEventListener('animationend', () => {
      bubble.remove();
      createBubble();
    });
  }
  for (let i = 0; i < 18; i++) createBubble();

  // Glow mouse effect
  const glowOverlay = document.getElementById('glow-overlay');
  document.addEventListener('mousemove', e => {
    glowOverlay.style.background = `radial-gradient(circle at ${e.clientX}px ${e.clientY}px, rgba(0,255,247,0.2) 0%, transparent 15%)`;
  });

  // Auth form switching
  showRegisterForm.onclick = () => {
    loginForm.style.display = 'none';
    registerForm.style.display = 'block';
  };
  showLoginForm.onclick = () => {
    registerForm.style.display = 'none';
    loginForm.style.display = 'block';
  };

  // Helper functions
  function getAvatar(email, photoURL) {
    if (photoURL) return photoURL;
    const firstLetter = email.charAt(0).toUpperCase();
    return `https://ui-avatars.com/api/?name=${firstLetter}&background=00fff7&color=002f2f&size=40`;
  }

  function showChooseRole() {
    authContainer.style.display = 'none';
    chooseRolePage.style.display = 'flex';
  }

  function showDoctorDashboard() {
    chooseRolePage.style.display = 'none';
    patientPage.style.display = 'none';
    header.classList.add('visible');
    main.classList.add('visible');
  }

  function showPatientForm() {
    chooseRolePage.style.display = 'none';
    header.classList.remove('visible');
    main.classList.remove('visible');
    patientPage.style.display = 'flex';
  }

  // Authentication
  loginBtn.onclick = async () => {
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    try {
      await signInWithEmailAndPassword(auth, email, password);
    } catch (error) {
      alert('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: ' + error.message);
    }
  };

  registerBtn.onclick = async () => {
    const name = document.getElementById('registerName').value;
    const email = document.getElementById('registerEmail').value;
    const password = document.getElementById('registerPassword').value;
    try {
      await createUserWithEmailAndPassword(auth, email, password);
    } catch (error) {
      alert('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨: ' + error.message);
    }
  };

  googleBtn.onclick = async () => {
    try {
      await signInWithPopup(auth, provider);
    } catch (error) {
      alert('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù€ Google: ' + error.message);
    }
  };

  // Role selection
  chooseDoctorBtn.onclick = showDoctorDashboard;
  choosePatientBtn.onclick = showPatientForm;
  backToMainBtn.onclick = showDoctorDashboard;

  // Sign out
  signOutBtn.onclick = () => {
    signOut(auth).then(() => {
      topBar.style.display = 'none';
      header.classList.remove('visible');
      main.classList.remove('visible');
      chooseRolePage.style.display = 'none';
      patientPage.style.display = 'none';
      authContainer.style.display = 'flex';
    });
  };

  // Patient form submission
  document.getElementById('patientForm').addEventListener('submit', function(e) {
    e.preventDefault();
    alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªØµÙ„ Ø¨Ùƒ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø·Ø¨ÙŠ Ù‚Ø±ÙŠØ¨Ø§Ù‹.');
    this.reset();
  });

  // Auth state observer
  onAuthStateChanged(auth, (user) => {
    if (user) {
      topBar.style.display = 'flex';
      userName.textConte
